<?php
echo '<pre>';
try{
require('../db_conn.php');
if(!mysql_query('SELECT * FROM `'.$DB_NAME.'`.`vigilante_users` LIMIT 0,1;'))
	echo 'Tables not present. Creating tables.<br/>';
else{
	echo 'Tables present. Removing and creating.<br/>';
	if(!(mysql_query('DROP TABLE `'.$DB_NAME.'`.`vigilante_users`;',$c) && mysql_query('DROP TABLE `'.$DB_NAME.'`.`vigilante_maps`',$c)))
		throw new Exception(mysql_error());
}
if(!mysql_query('CREATE TABLE  `'.$DB_NAME.'`.`vigilante_users` (`name` VARCHAR(100) NOT NULL,`level` INT(3) NOT NULL,PRIMARY KEY(`name`));',$c))
	throw new Exception(mysql_error());
else
	echo 'Table users created<br/>';
if(!mysql_query('CREATE TABLE  `'.$DB_NAME.'`.`vigilante_maps` (`data` VARCHAR(900) NOT NULL,PRIMARY KEY(`data`));',$c))
	throw new Exception(mysql_error());
else{
	echo 'Table maps created<br/>';
	$map="000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000".
		 "000000000000000000000000000000000000000000000000000000000000";
	if(!mysql_query("INSERT INTO `$DB_NAME`.`vigilante_maps` (`data`) VALUES('$map');",$c))
		throw new Exception(mysql_error());
}
} catch(Exception $e){
	echo $e->getMessage();
}
?>